var DECAL_PAINTINGS = [
  "AA1",
  "AA2",
  "AA3",
  "AA4",
  "AA5",
  "AA7",
  "AA8",
  "AA9",
  "AMC",
  "Amberstar",
  "Apshai",
  "ArcticShipwreck",
  "Arena",
  "Aztec",
  "BC1",
  "BFF",
  "Bagitman",
  "Barbarian1",
  "Barbarian5",
  "BeachHead",
  "Blackwyche",
  "BlueMax",
  "BlueMax2",
  "BlueMax3",
  "BoogaBoo1",
  "BoogaBoo3",
  "C64",
  "CH1",
  "CSB1",
  "CW1",
  "CW10",
  "CW2",
  "CW3",
  "CW5",
  "CW6",
  "Castle",
  "CastleTerror",
  "Cavelon",
  "Cavelon3",
  "Choplifter",
  "Commando2",
  "CrystalCastles",
  "Cuthbert1",
  "CyberPunk1",
  "DDID2",
  "DK",
  "DK2",
  "DM1",
  "DM11",
  "DM12",
  "DM13",
  "DM2",
  "DM3",
  "DM4",
  "DM5",
  "DM6",
  "DM7",
  "DigDug",
  "Drelbs",
  "EOB1",
  "EOB2",
  "EOB3",
  "EOB4",
  "Eric",
  "FA2",
  "FA3",
  "FF1",
  "FF2",
  "FF4",
  "Falcon",
  "FalconPatrol2",
  "FireAnt",
  "FranticFreddie",
  "Fred1",
  "Fred2",
  "Frogger",
  "Galaga1",
  "Galaxian3",
  "Ghostbusters",
  "Gods",
  "Goonies",
  "GreenBeret",
  "HL1",
  "HL2",
  "HL3",
  "HL4",
  "HL5",
  "HOB1",
  "HOB11",
  "HOB2",
  "HOB4",
  "HOB5",
  "Hero1",
  "Hero10",
  "Hero2",
  "Hero3",
  "Horace",
  "Horace2",
  "HoraceSki",
  "Hunchback",
  "IK1",
  "IM",
  "Iceman",
  "Imhotep",
  "Impossible_Mission4",
  "Invaders",
  "JSW",
  "JSW2",
  "JSW3",
  "JetPac",
  "Jumpman",
  "JumpmanJr",
  "Jupiter_Lander",
  "KQ1",
  "Kangaroo.png",
  "Karateka",
  "Killerwat",
  "Knightlore",
  "LSL1",
  "LSL2",
  "LSL20",
  "LSL3",
  "LSL4",
  "LSL6",
  "LSL7",
  "LTUT",
  "LastNinja1",
  "Lode",
  "Maniac",
  "ManicMiner",
  "Miner",
  "MonkeyIsland",
  "Montezuma",
  "Moon",
  "MrRobot",
  "Nebulus",
  "OMine",
  "Oblivion",
  "Oblivion2",
  "OperationWolf",
  "OperationWolf2",
  "PAC2",
  "Paratroopers",
  "Penta",
  "Phara",
  "Pipeline",
  "Pitfall",
  "Pitfall2",
  "Pitfall3",
  "Pitfall4",
  "Pitstop",
  "Pooyan",
  "Portal1",
  "Prince1",
  "Prince2",
  "RRR",
  "RickDangerous",
  "Robin",
  "SOF",
  "SQ1",
  "ST",
  "SVS1",
  "SVS10",
  "SVS11",
  "SVS2",
  "SVS3",
  "SVS4",
  "SW2",
  "SW4",
  "Scramble2",
  "Scramble3",
  "Scramble4",
  "Skyrim",
  "Soccer",
  "Sorcery2",
  "Sorcery3",
  "TR1",
  "TR1",
  "TR10",
  "TR2",
  "TR2",
  "TR3",
  "TheSentinel",
  "Tut",
  "Tut2",
  "UU",
  "UU2",
  "Ultima1",
  "Ultima2",
  "Under",
  "VIC20",
  "Valhalla",
  "Vixen1",
  "Vixen2",
  "WDW",
  "WG2",
  "WG3",
  "WOW1",
  "WOW2",
  "WOW3",
  "Walls",
  "Wally",
  "Winter",
  "Wolf1",
  "Wolf2",
  "Zak",
  "Zaxxon",
  "ZimSalaBim",
  "Zong",
  "galaxian",
  "sabre2",
  "ski",
  "trash",
  "zx1",
  "WG4",
  "BlueMax4",
  "Witcher5",
  "LSL9",
  "Shamus1",
  "PharaohCurse3",
  "Witcher4",
  "Witcher3",
  "TempleOfApshai",
  "Witcher2",
  "KnightLore2",
  "Witcher1",
  "Spelunker",
  "ShamusCase2",
  "Ishar2",
  "Ishar1",
  "Jungle1",
  "Pitfall5",
  "PharaohCurse2",
  "Frontier",
  "LSL8",
  "SP2",
  "SP1",
  "EveLSL",
  "SVS24",
  "SVS23",
  "KQ10",
  "Shamus20",
  "Pitfall21",
  "Apshai6",
  "Apshai5",
  "MontyMole",
  "PacClose",
  "PacGhost",
  "Pitfall20",
  "SVS22",
  "SVS21",
  "Apshai4",
  "Apshai3",
  "Paperboy",
  "JungleStory",
  "RobinOfTheWood2",
  "Pyjamarama",
  "SammyLightfoot",
  "ThePawn",
  "KokotoniWilf",
  "Cauldron1",
  "Zeppelin2",
  "TimeTunnel",
  "SP3",
  "AC2",
  "Hero30",
  "SVS30",
  "AirWolf",
  "AA41",
  "AA40",
  "SeaWolf",
  "GIJoe10",
  "Hobbit1", "Hobbit3", "Ghostbusters2", "Commando3", "EOB20", "Hobbit6", "Hobbit7", "Hobbit8", "Hobbit9", "AticAtac1", "Infiltrator1", "ManicMiner2",
  "ManicMiner3", "Prince3", "Infiltrator2",
  "1942_2", "Arnie1", "BTF1", "BeachHead5", "Biggles1", "BlueThunder1", "BrianBloodaxe1", "BrideOfFrakenstein1", "BruceLee1", "Captive", "EnigmaForce", 
  "Fred3", "Fred4", "JSW4", "ManiacMansion2", "PQ1", "Pengo", "Pirates", "PolePosition", "Silkworm1", "SirFred1", "SirFred2", "SirFred3", "SuperDogfight",
   "SuperDogfight2", "Unknown1"
];
//console.log("DECAL_PAINTINGS", DECAL_PAINTINGS.sort());
var DECAL_CRESTS = [
  "Crest",
  "Web2",
  "Web1",
  "SkeletonOnTheWall",
  "Torch",
  "Web4",
  "Web6",
  "Web5",
  "LS",
  "Ivy2",
  "Ivy1",
  "PrayingSkeleton",
  "Skull4",
  "Skull3",
  "Skull2",
  "Skull1",
  "skeletonDance",
  "Crack5",
  "Crack4",
  "Crack3",
  "HangingSkeleton",
  "DragonAndSword",
  "Candles1",
  "SpiderWeb7",
  "KnightStatue2",
  "WallSkell",
  "Crack7",
  "Crack6",
  "KnightStatue", "Ivy3", "Ivy4"
];
//console.log("DECAL_CRESTS", DECAL_CRESTS.sort());

//types
var COMMON_ITEM_TYPE = {
  GoldKey: {
    class: "GoldKey",
    inventorySprite: "GoldKeyBig",
    category: "key",
    color: "Gold"
  },
  SilverKey: {
    class: "SilverKey",
    inventorySprite: "SilverKeyBig",
    category: "key",
    color: "Silver"
  },
  RedKey: {
    class: "RedKey",
    inventorySprite: "RedKeyBig",
    category: "key",
    color: "Red"
  },
  RedPotion: {
    class: "RedPotion",
    inventorySprite: "RedPotion24",
    category: "potion",
    color: "red"
  },
  BluePotion: {
    class: "BluePotion",
    inventorySprite: "BluePotion24",
    category: "potion",
    color: "blue"
  },
  Scroll: {
    class: "ClosedScroll",
    category: "scroll"
  },
  GoldCoin: {
    class: "GoldCoins",
    category: "gold"
  },
  GoldBar: {
    class: "GoldBar2",
    category: "gold"
  },
  SwordSkill: {
    class: "SwordSkill",
    category: "skill",
    which: "attack"
    //inventorySprite:
  },
  ShieldSkill: {
    class: "ShieldSkill",
    category: "skill",
    inventorySprite: "ShieldSkill24",
    which: "defense"
  },
  MagicSkill: {
    class: "MagicSkill",
    category: "skill",
    inventorySprite: "MagicSkill24",
    which: "magic"
  },
  HealthStatus: {
    class: "Health",
    category: "status",
    inventorySprite: "Health24",
    status: "health"
  },
  ManaStatus: {
    class: "Mana",
    category: "status",
    inventorySprite: "Mana24",
    status: "mana"
  }
};
var FLOOR_CONTAINER_TYPE = {
  Chest: {
    class: "ChestClosed",
    classClosed: "ChestClosed",
    classOpen: "ChestOpen"
  }
};
var MONSTER = {
  SlowSkeletonTest: {
    class: "Skeleton",
    moveSpeed: 2.0,
    SPRITE_FPS: 25,
    base: 1,
    attack: 6,
    defense: 2,
    health: 7,
    magic: 0,
    xp: 5,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt",
    behaviourArguments: [],
    inventory: "SwordSkill",
    inventoryValue: 0
  },
  SlowSkeleton: {
    class: "Skeleton",
    moveSpeed: 2.0,
    SPRITE_FPS: 25,
    base: 1,
    attack: 6,
    defense: 2,
    health: 7,
    magic: 0,
    xp: 5,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt",
    behaviourArguments: [],
    inventory: "GoldCoin",
    inventoryValue: 10
  },
  LittleSkelly: {
    class: "LittleSkelly",
    moveSpeed: 2.0,
    SPRITE_FPS: 25,
    base: 1,
    attack: 9,
    defense: 4,
    health: 10,
    magic: 0,
    xp: 15,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [9, ["wanderer"], 5, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 12
  },
  GreenSnake: {
    class: "GreenSnake",
    moveSpeed: 1.0,
    SPRITE_FPS: 20,
    base: 1,
    attack: 3,
    defense: 2,
    magic: 0,
    health: 4,
    xp: 4,
    attackSound: "SnakeAttack",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [4, ["wanderer"], 2, ["hunt"]],
  },
  LittleGreenSnake: {
    class: "LittleGreenSnake",
    moveSpeed: 3.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 1,
    defense: 0,
    magic: 0,
    health: 2,
    xp: 2,
    attackSound: "SnakeAttack",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [2, ["wanderer"], 1, ["hunt"]],
  },
  Bat: {
    class: "Bat",
    moveSpeed: 3.0,
    SPRITE_FPS: 30,
    base: -0.25,
    attack: 0,
    defense: 0,
    magic: 0,
    health: 1,
    xp: 1,
    attackSound: "BatAttack",
    hurtSound: "BatAttack",
    behaviourArguments: [Infinity, ["wanderer"], -1],
  },
  HellRat: {
    class: "HellRat",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 7,
    defense: 3,
    magic: 0,
    health: 8,
    xp: 7,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt",
    behaviourArguments: [8, ["wanderer"], 6, ["advancer"]],
    inventory: "GoldCoin",
    inventoryValue: 15
  },
  Skelegoat: {
    class: "Skelegoat",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 5,
    defense: 2,
    magic: 4,
    health: 10,
    xp: 20,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt2",
    mana: 3,
    caster: true,
    shootDistance: 4,
    stalkDistance: 5,
    behaviourArguments: [7, ["wanderer"], 5, ["shoot"]],
    inventory: "GoldCoin",
    inventoryValue: 25
  },
  Wizard_BossL1: {
    class: "Wizard",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 10,
    defense: 5,
    magic: 10,
    health: 25,
    xp: 100,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "MagicSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 5, ["shoot"]],
  },
  Wizard: {
    class: "Wizard",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 10,
    defense: 5,
    magic: 10,
    health: 25,
    xp: 25,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 3,
    caster: true,
    shootDistance: 6,
    stalkDistance: 3,
    inventory: "GoldCoin",
    inventoryValue: 50,
    behaviourArguments: [8, ["wanderer"], 6, ["shoot"]],
  },
  Fox: {
    class: "Fox",
    moveSpeed: 3.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 10,
    defense: 0,
    magic: 0,
    health: 20,
    xp: 20,
    attackSound: "MonsterAttack1",
    hurtSound: "PainSqueek",
    behaviourArguments: [5, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 10
  },
  Skeletona: {
    class: "Skeletona",
    moveSpeed: 1.8,
    SPRITE_FPS: 25,
    base: 1,
    attack: 12,
    defense: 8,
    health: 20,
    magic: 0,
    xp: 25,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [6, ["wanderer"], 3, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 30
  },
  Sorceress_BossL2: {
    class: "Sorceress",
    moveSpeed: 1.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 15,
    defense: 10,
    magic: 14,
    health: 35,
    xp: 150,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "MagicSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 5, ["shoot"]],
  },
  SmallEvilBat: {
    class: "SmallEvilBat",
    moveSpeed: 3.1,
    SPRITE_FPS: 30,
    base: -0.20,
    attack: 13,
    defense: 6,
    magic: 0,
    health: 15,
    xp: 15,
    attackSound: "BatAttack",
    hurtSound: "BatAttack",
    behaviourArguments: [Infinity, ["wanderer"], -1],
  },
  Sorceress: {
    class: "Sorceress",
    moveSpeed: 1.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 15,
    defense: 10,
    magic: 14,
    health: 35,
    xp: 50,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "GoldCoin",
    inventoryValue: 50,
    behaviourArguments: [7, ["wanderer"], 5, ["shoot"]],
  },
  Aunt: {
    class: "Aunt",
    moveSpeed: 1.8,
    SPRITE_FPS: 30,
    base: 1,
    attack: 13,
    defense: 10,
    magic: 0,
    health: 25,
    xp: 25,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    inventory: "GoldCoin",
    inventoryValue: 20,
    behaviourArguments: [6, ["wanderer"], 4, ["follower"]],
  },
  Spider: {
    class: "Spider",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 20,
    defense: 10,
    magic: 5,
    health: 20,
    xp: 30,
    attackSound: "MonsterAttack2",
    hurtSound: "PainSqueek",
    behaviourArguments: [15, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 20
  },
  SkeletonMajor: {
    class: "SkeletonMajor",
    moveSpeed: 2.2,
    SPRITE_FPS: 25,
    base: 1,
    attack: 18,
    defense: 14,
    health: 25,
    magic: 0,
    xp: 33,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [8, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 30
  },
  LittleOrc: {
    class: "LittleOrc",
    moveSpeed: 2.4,
    SPRITE_FPS: 25,
    base: 1,
    attack: 20,
    defense: 15,
    health: 25,
    magic: 0,
    xp: 40,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 3, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 35
  },
  RoomFairy: {
    class: "Fairy",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 15,
    defense: 10,
    magic: 20,
    health: 40,
    xp: 60,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 3,
    caster: true,
    shootDistance: 5,
    stalkDistance: 4,
    inventory: "GoldCoin",
    inventoryValue: 50,
    behaviourArguments: [10, ["goto", "circler"], 5, ["shoot"]],
  },
  BlackGhost_BossL4: {
    class: "BlackGhost",
    moveSpeed: 1.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 25,
    defense: 18,
    magic: 25,
    health: 40,
    xp: 250,
    attackSound: "MonsterAttack1",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "ShieldSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 5, ["shoot"]],
  },
  RoomBlackGhost: {
    class: "BlackGhost",
    moveSpeed: 1.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 25,
    defense: 18,
    magic: 25,
    health: 40,
    xp: 250,
    attackSound: "MonsterAttack1",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "ShieldSkill",
    inventoryValue: 0,
    behaviourArguments: [10, ["goto", "circler"], 5, ["shoot"]],
  },
  BlackGhost: {
    class: "BlackGhost",
    moveSpeed: 1.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 25,
    defense: 18,
    magic: 25,
    health: 40,
    xp: 150,
    attackSound: "MonsterAttack1",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "ShieldSkill",
    inventoryValue: 0,
    behaviourArguments: [10, ["wanderer"], 5, ["shoot"]],
  },
  Fairy: {
    class: "Fairy",
    moveSpeed: 2.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 15,
    defense: 10,
    magic: 20,
    health: 40,
    xp: 60,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    mana: 3,
    caster: true,
    shootDistance: 4,
    stalkDistance: 5,
    inventory: "GoldCoin",
    inventoryValue: 50,
    behaviourArguments: [8, ["wanderer"], 4, ["shoot"]],
  },
  RedBat: {
    class: "RedBat",
    moveSpeed: 3.2,
    SPRITE_FPS: 30,
    base: -0.20,
    attack: 18,
    defense: 10,
    magic: 0,
    health: 25,
    xp: 20,
    attackSound: "BatAttack",
    hurtSound: "BatAttack",
    behaviourArguments: [Infinity, ["wanderer"], -1],
  },
  Badger: {
    class: "Badger",
    moveSpeed: 2.8,
    SPRITE_FPS: 25,
    base: 1,
    attack: 23,
    defense: 16,
    magic: 5,
    health: 30,
    xp: 42,
    attackSound: "MonsterAttack2",
    hurtSound: "PainSqueek",
    behaviourArguments: [15, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 25
  },
  Scary: {
    class: "Scary",
    moveSpeed: 2.5,
    SPRITE_FPS: 30,
    base: 1,
    attack: 21,
    defense: 15,
    magic: 20,
    health: 35,
    xp: 65,
    attackSound: "MonsterAttack1",
    hurtSound: "Ow",
    mana: 3,
    caster: true,
    shootDistance: 4,
    stalkDistance: 5,
    inventory: "GoldCoin",
    inventoryValue: 45,
    behaviourArguments: [7, ["wanderer"], 4, ["shoot"]],
  },
  ZombieGirl: {
    class: "ZombieGirl",
    moveSpeed: 2.4,
    SPRITE_FPS: 25,
    base: 1,
    attack: 22,
    defense: 17,
    health: 30,
    magic: 0,
    xp: 45,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [7, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 40
  },
  Flamy_BossL5: {
    class: "Flamy",
    moveSpeed: 1.6,
    SPRITE_FPS: 30,
    base: 1,
    attack: 30,
    defense: 22,
    magic: 30,
    health: 50,
    xp: 300,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 4,
    inventory: "ManaStatus",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 5, ["shoot"]],
  },
  RoomFlamy: {
    class: "Flamy",
    moveSpeed: 1.6,
    SPRITE_FPS: 30,
    base: 1,
    attack: 30,
    defense: 22,
    magic: 30,
    health: 50,
    xp: 300,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 4,
    inventory: "ManaStatus",
    inventoryValue: 0,
    behaviourArguments: [10, ["goto", "circler"], 5, ["shoot"]],
  },
  Flamy: {
    class: "Flamy",
    moveSpeed: 1.6,
    SPRITE_FPS: 30,
    base: 1,
    attack: 30,
    defense: 22,
    magic: 30,
    health: 50,
    xp: 300,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 4,
    inventory: "Scroll",
    inventoryValue: 0,
    behaviourArguments: [10, ["advancer"], 5, ["shoot"]],
  },
  WhiteWolf: {
    class: "WhiteWolf",
    moveSpeed: 2.6,
    SPRITE_FPS: 25,
    base: 1,
    attack: 25,
    defense: 18,
    magic: 7,
    health: 30,
    xp: 50,
    attackSound: "MonsterAttack2",
    hurtSound: "PainSqueek",
    behaviourArguments: [9, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 30
  },
  SkeletonGeneral: {
    class: "SkeletonGeneral",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 26,
    defense: 20,
    health: 30,
    magic: 0,
    xp: 50,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [9, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 40
  },
  ShabbySkeleton_BossL6: {
    class: "ShabbySkeleton",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 32,
    defense: 25,
    health: 50,
    magic: 10,
    xp: 400,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [9, ["goto", "circler"], 5, ["hunt"]],
    inventory: "SwordSkill",
    inventoryValue: 0
  },
  ShabbySkeleton: {
    class: "ShabbySkeleton",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 32,
    defense: 25,
    health: 50,
    magic: 10,
    xp: 100,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [9, ["wanderer"], 5, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 100
  },
  BlackWolf: {
    class: "BlackWolf",
    moveSpeed: 2.8,
    SPRITE_FPS: 25,
    base: 1,
    attack: 26,
    defense: 17,
    magic: 7,
    health: 40,
    xp: 75,
    attackSound: "MonsterAttack2",
    hurtSound: "PainSqueek",
    behaviourArguments: [10, ["wanderer"], 5, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 50
  },
  GreenSkelly: {
    class: "GreenSkelly",
    moveSpeed: 2.7,
    SPRITE_FPS: 25,
    base: 1,
    attack: 24,
    defense: 22,
    health: 30,
    magic: 0,
    xp: 75,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt3",
    behaviourArguments: [8, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 50
  },
  Scorpion: {
    class: "Scorpion",
    moveSpeed: 2.1,
    SPRITE_FPS: 25,
    base: 1,
    attack: 28,
    defense: 20,
    magic: 10,
    health: 45,
    xp: 80,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [5, ["wanderer"], 3, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 50
  },
  GreenZombie: {
    class: "GreenZombie",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 30,
    defense: 24,
    magic: 0,
    health: 50,
    xp: 100,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 5, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 60
  },
  ArmoredSkelly: {
    class: "ArmoredSkelly",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 33,
    defense: 28,
    magic: 0,
    health: 55,
    xp: 120,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt",
    behaviourArguments: [8, ["wanderer"], 6, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 70
  },
  SmallDragon: {
    class: "SmallDragon",
    moveSpeed: 3.5,
    SPRITE_FPS: 30,
    base: 0,
    attack: 27,
    defense: 22,
    magic: 22,
    health: 50,
    xp: 100,
    attackSound: "MonsterAttack2",
    hurtSound: "PainSqueek",
    mana: 5,
    caster: true,
    shootDistance: 5,
    stalkDistance: 3,
    inventory: "BluePotion",
    inventoryValue: 0,
    behaviourArguments: [10, ["advancer"], 5, ["shoot"]],
  },
  Croc: {
    class: "Croc",
    moveSpeed: 2.4,
    SPRITE_FPS: 25,
    base: 1,
    attack: 29,
    defense: 23,
    magic: 5,
    health: 50,
    xp: 100,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [5, ["wanderer"], 3, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 50
  },
  BlueDevil_BossL7: {
    class: "BlueDevil",
    moveSpeed: 1.9,
    SPRITE_FPS: 30,
    base: 1,
    attack: 32,
    defense: 25,
    magic: 35,
    health: 60,
    xp: 450,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "SwordSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 6, ["shoot"]],
  },
  RoomBlueDevil: {
    class: "BlueDevil",
    moveSpeed: 1.9,
    SPRITE_FPS: 30,
    base: 1,
    attack: 32,
    defense: 25,
    magic: 35,
    health: 60,
    xp: 400,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "SwordSkill",
    inventoryValue: 0,
    behaviourArguments: [10, ["goto", "circler"], 6, ["shoot"]],
  },
  BlueDevil: {
    class: "BlueDevil",
    moveSpeed: 1.9,
    SPRITE_FPS: 30,
    base: 1,
    attack: 32,
    defense: 25,
    magic: 35,
    health: 60,
    xp: 500,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "SwordSkill",
    inventoryValue: 0,
    behaviourArguments: [10, ["wanderer"], 6, ["shoot"]],
  },
  Hudobec: {
    class: "Hudobec",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 35,
    defense: 30,
    health: 50,
    magic: 10,
    xp: 125,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 80
  },
  Ninja: {
    class: "Ninja",
    moveSpeed: 3.0,
    SPRITE_FPS: 30,
    base: 1,
    attack: 40,
    defense: 10,
    magic: 0,
    health: 60,
    xp: 100,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    inventory: "GoldCoin",
    inventoryValue: 20,
    behaviourArguments: [16, ["wanderer"], 8, ["follower"]],
  },
  RedDevil_BossL8: {
    class: "RedDevil",
    moveSpeed: 2.1,
    SPRITE_FPS: 30,
    base: 1,
    attack: 36,
    defense: 30,
    magic: 40,
    health: 70,
    xp: 500,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "MagicSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 6, ["shoot"]],
  },
  RoomRedDevil: {
    class: "RedDevil",
    moveSpeed: 2.1,
    SPRITE_FPS: 30,
    base: 1,
    attack: 36,
    defense: 30,
    magic: 40,
    health: 70,
    xp: 400,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "MagicSkill",
    inventoryValue: 0,
    behaviourArguments: [9, ["goto", "circler"], 6, ["shoot"]],
  },
  RedDevil: {
    class: "RedDevil",
    moveSpeed: 2.1,
    SPRITE_FPS: 30,
    base: 1,
    attack: 36,
    defense: 30,
    magic: 40,
    health: 70,
    xp: 300,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "GoldCoin",
    inventoryValue: 100,
    behaviourArguments: [9, ["wanderer"], 6, ["shoot"]],
  },
  GreenPuffer: {
    class: "GreenPuffer",
    moveSpeed: 2.3,
    SPRITE_FPS: 25,
    base: 1,
    attack: 40,
    defense: 32,
    health: 60,
    magic: 10,
    xp: 140,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 4, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 100
  },
  Knight: {
    class: "Knight",
    moveSpeed: 2.2,
    SPRITE_FPS: 30,
    base: 1,
    attack: 44,
    defense: 35,
    magic: 0,
    health: 60,
    xp: 150,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    inventory: "GoldCoin",
    inventoryValue: 100,
    behaviourArguments: [6, ["wanderer"], 4, ["follower"]],
  },
  SmallSkelly: {
    class: "SmallSkelly",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 42,
    defense: 33,
    magic: 0,
    health: 55,
    xp: 130,
    attackSound: "MonsterAttack2",
    hurtSound: "MonsterHurt",
    behaviourArguments: [8, ["wanderer"], 6, ["hunt"]],
    inventory: "GoldCoin",
    inventoryValue: 70
  },
  RedBull_BossL9: {
    class: "RedBull",
    moveSpeed: 2.3,
    SPRITE_FPS: 30,
    base: 1,
    attack: 50,
    defense: 40,
    magic: 45,
    health: 80,
    xp: 1000,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "SwordSkill",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["goto", "circler"], 6, ["shoot"]],
  },
  RoomRedBull: {
    class: "RedBull",
    moveSpeed: 2.3,
    SPRITE_FPS: 30,
    base: 1,
    attack: 50,
    defense: 40,
    magic: 45,
    health: 80,
    xp: 500,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "SwordSkill",
    inventoryValue: 0,
    behaviourArguments: [4, ["goto", "circler"], 6, ["shoot"]],
  },
  RedBull: {
    class: "RedBull",
    moveSpeed: 2.3,
    SPRITE_FPS: 30,
    base: 1,
    attack: 50,
    defense: 40,
    magic: 45,
    health: 80,
    xp: 250,
    attackSound: "MonsterAttack2",
    hurtSound: "DeathPain1",
    mana: 4,
    caster: true,
    shootDistance: 6,
    stalkDistance: 4,
    inventory: "RedPotion",
    inventoryValue: 0,
    behaviourArguments: [10, ["wanderer"], 6, ["shoot"]],
  },
  Dragon: {
    class: "BlackDragon",
    moveSpeed: 3.0,
    SPRITE_FPS: 30,
    final_boss: true,
    base: 1,
    attack: 100,
    defense: 80,
    magic: 100,
    health: 100,
    xp: 5000,
    attackSound: "MonsterAttack1",
    hurtSound: "PainSqueek",
    mana: 10,
    caster: true,
    shootDistance: 8,
    stalkDistance: 6,
    inventory: "GoldKey",
    inventoryValue: 0,
    behaviourArguments: [Infinity, ["wanderer"], 8, ["shoot"]],
  },
  Death1: {
    class: "Death1",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 48,
    defense: 40,
    health: 50,
    magic: 10,
    xp: 250,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 4, ["follower"]],
    inventory: "GoldCoin",
    inventoryValue: 250
  },
  Death2: {
    class: "Death2",
    moveSpeed: 2.5,
    SPRITE_FPS: 25,
    base: 1,
    attack: 46,
    defense: 38,
    health: 50,
    magic: 10,
    xp: 200,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt2",
    behaviourArguments: [8, ["wanderer"], 4, ["advancer"]],
    inventory: "GoldCoin",
    inventoryValue: 200
  },
  Walker: {
    class: "Walker",
    moveSpeed: 2.0,
    SPRITE_FPS: 50,
    base: 1,
    attack: 75,
    defense: 0,
    magic: 100,
    health: 100,
    xp: 400,
    attackSound: "MonsterAttack1",
    hurtSound: "MonsterHurt",
    behaviourArguments: [10, ["wanderer"], 8, ["advancer"]],
    inventory: "Scroll",
    inventoryValue: 0
  },
  Cutie: {
    class: "Cutie",
    moveSpeed: 2.2,
    SPRITE_FPS: 30,
    base: 1,
    attack: 50,
    defense: 50,
    magic: 0,
    health: 60,
    xp: 300,
    attackSound: "HumanAttack1",
    hurtSound: "Ow",
    inventory: "BluePotion",
    inventoryValue: 0,
    behaviourArguments: [6, ["wanderer"], 4, ["follower"]],
  },
};
var MISSILE_TYPE = {
  Fireball: {
    class: "Fireball",
    moveSpeed: 10.0,
    SPRITE_FPS: 30,
    base: 0
  }
};
var DECAL_TYPE = {
  Painting: {
    spriteSource: DECAL_PAINTINGS,
    position: ["top", "center"]
  },
  Crest: {
    spriteSource: DECAL_CRESTS,
    position: ["center", "center"]
  }
};
var SHRINE_TYPE = {
  AttackShrine: {
    sprite: "AttackShrine",
    position: ["center", "center"],
    interactive: true,
    skill: "attack"
  },
  DefenseShrine: {
    sprite: "DefenseShrine",
    position: ["center", "center"],
    interactive: true,
    skill: "defense"
  },
  MagicShrine: {
    sprite: "MagicShrine",
    position: ["center", "center"],
    interactive: true,
    skill: "magic"
  }
};
var GATE_TYPE = {
  WoodenGate: {
    sprite: "WoodenDoor",
    position: ["center", "center"],
    interactive: true,
    locked: false,
    color: null
  },
  SilverGate: {
    sprite: "WoodenGateSilverKeyhole",
    position: ["center", "center"],
    interactive: true,
    locked: true,
    color: "Silver"
  },
  GoldGate: {
    sprite: "WoodenDoorGoldKeyhole",
    position: ["center", "center"],
    interactive: true,
    locked: true,
    color: "Gold"
  },
  RedGate: {
    sprite: "WoodenGateRedKeyhole",
    position: ["center", "center"],
    interactive: true,
    locked: true,
    color: "Red"
  }
};
var STAIRCASE_TYPE = {
  UP: {
    sprite: "UpStairs",
    position: ["center", "center"],
    interactive: true,
    direction: -1
  },
  DOWN: {
    sprite: "DownStairs",
    position: ["center", "center"],
    interactive: true,
    direction: 1
  },
  GATE: {
    sprite: "EntranceGate",
    position: ["center", "center"],
    interactive: false,
    direction: 0
  }
};
var DECAL_TYPES_COLLECTION = [DECAL_TYPE.Painting, DECAL_TYPE.Crest];
var DESTRUCTION_TYPE = {
  Explosion: {
    class: "Explosion",
    SPRITE_FPS: 60
  },
  LongExplosion: {
    class: "Explosion4",
    SPRITE_FPS: 60
  },
  SmallShortExplosion: {
    class: "SmallShortExplosion",
    SPRITE_FPS: 40
  },
  BigExplosion: {
    class: "BigExplosion",
    SPRITE_FPS: 60
  },
  ShortExplosion: {
    class: "ShortExplosion",
    SPRITE_FPS: 60
  },
  Smoke: {
    class: "Smoke",
    SPRITE_FPS: 60
  }
};
var SCROLL_TYPE = {
  Light: 130,
  Invisibility: 100,
  Map: 100,
  DrainMana: 90,
  Cripple: 90,
  BoostWeapon: 100,
  BoostArmor: 100,
  DestroyArmor: 80,
  DestroyWeapon: 80,
  Petrify: 20,
  MagicBoost: 100,
  TeleportTemple: 100,
  Luck: 100,
  HalfLife: 50
};
var MAP = {
  1: {
    width: 37,
    height: 37,
    floor: "RockFloor",
    ceil: "MorgueFloor",
    wall: "CastleWall"
  },
  2: {
    width: 37,
    height: 37,
    floor: "GreyDungeonFloor",
    ceil: "ThatchFloor",
    wall: "DungeonWall"
  },
  3: {
    width: 37,
    height: 37,
    floor: "TlakFloor3",
    ceil: "RockCeiling",
    wall: "DungeonWall2"
  },
  4: {
    width: 37,
    height: 37,
    floor: "Pavement2",
    ceil: "MorgueFloor",
    wall: "DungeonWall3"
  },
  5: {
    width: 37,
    height: 37,
    floor: "TiledFloor",
    ceil: "Rough",
    wall: "DungeonWall4"
  },
  6: {
    width: 37,
    height: 37,
    floor: "GreyDungeonFloor",
    ceil: "RockCeiling",
    wall: "CastleWall"
  },
  7: {
    width: 37,
    height: 37,
    floor: "Tile",
    ceil: "ThatchFloor",
    wall: "BlackBrickWall"
  },
  8: {
    width: 37,
    height: 37,
    floor: "RockWall",
    ceil: "Pavement2",
    wall: "BrickWall2"
  },
  9: {
    width: 37,
    height: 37,
    floor: "TlakFloor3",
    ceil: "ThatchFloor",
    wall: "StoneFloor"
  },
  10: {
    width: 37,
    height: 37,
    floor: "GreyDungeonFloor",
    ceil: "RockWall",
    wall: "StoneFloor3"
  }
};
var MOSTER_LAYOUT = {
  1: {
    start: {
      N: 1,
      monster: { LittleGreenSnake: 1 }
    },
    corridor: {
      N: 25,
      monster: {
        Bat: 2,
        LittleGreenSnake: 1,
        GreenSnake: 3,
        SlowSkeleton: 3,
        HellRat: 3,
        Skelegoat: 1.5
      }
    },
    common: {
      N: 2,
      monster: {
        Bat: 1,
        GreenSnake: 2,
        SlowSkeleton: 3,
        HellRat: 2,
        Skelegoat: 1
      }
    },
    Gold: {
      N: 2,
      monster: { Skelegoat: 2, HellRat: 1 },
      boss: { Wizard_BossL1: 1 }
    },
    Silver: {
      N: 2,
      monster: { HellRat: 2, SlowSkeleton: 1, Skelegoat: 1 },
      boss: { Skelegoat: 1 }
    },
    firstKey: {
      N: 2,
      monster: { HellRat: 2, GreenSnake: 2, SlowSkeleton: 3 },
      boss: { Skelegoat: 1 }
    },
    Red: {
      N: 2,
      monster: { HellRat: 2, GreenSnake: 2, Skelegoat: 1 },
      boss: { Skelegoat: 1 }
    },
    temple: {
      N: 1,
      monster: { Bat: 1, HellRat: 2 }
    }
  },
  2: {
    start: {
      N: 1,
      monster: { SlowSkeleton: 1 },
      //monster: { Fox: 1 },
      //monster: { LittleSkelly: 1 },
      //monster: { Skeletona: 1 },
      //monster: { Sorceress_BossL2: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        LittleSkelly: 2,
        SlowSkeleton: 1,
        HellRat: 1,
        Skelegoat: 2,
        Wizard: 0.5,
        Fox: 1,
        Skeletona: 0.2
      }
    },
    common: {
      N: 2,
      monster: {
        LittleSkelly: 2,
        SlowSkeleton: 1,
        HellRat: 1,
        Skelegoat: 3,
        Wizard: 1,
        Fox: 1,
        Skeletona: 0.5
      }
    },
    Gold: {
      N: 2,
      monster: { Skelegoat: 1, LittleSkelly: 1, Fox: 1, Skeletona: 4 },
      boss: { Sorceress_BossL2: 1 }
    },
    Silver: {
      N: 2,
      monster: { LittleSkelly: 1, Skelegoat: 1, Fox: 1, Skeletona: 3 },
      boss: { Wizard: 1 }
    },
    firstKey: {
      N: 2,
      monster: { LittleSkelly: 2, Fox: 2, Skeletona: 1 },
      boss: { Skelegoat: 1 }
    },
    Red: {
      N: 2,
      monster: { LittleSkelly: 1, Skelegoat: 1, Fox: 1, Skeletona: 1 },
      boss: { Wizard: 1 }
    },
    temple: {
      N: 1,
      monster: { HellRat: 1 }
    }
  },
  3: {
    start: {
      N: 1,
      monster: { Bat: 1 },
      //monster: { Fox: 1 },
      //monster: { LittleSkelly: 1 },
      //monster: { Skeletona: 1 },
      //monster: { Aunt: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        LittleSkelly: 2,
        Skelegoat: 2,
        Wizard: 1,
        Fox: 1,
        Skeletona: 2,
        SmallEvilBat: 1,
        Aunt: 0.3,
      }
    },
    common: {
      N: 2,
      monster: {
        LittleSkelly: 1,
        Skelegoat: 1,
        Wizard: 2,
        Fox: 1,
        Skeletona: 2,
        SmallEvilBat: 1,
        Aunt: 1,
      }
    },
    Gold: {
      N: 2,
      monster: { LittleSkelly: 1, Fox: 1, Skeletona: 3, Sorceress: 2, Aunt: 1 },
      boss: { Sorceress_BossL2: 1 }
    },
    Silver: {
      N: 2,
      monster: { LittleSkelly: 1, Skelegoat: 1, Fox: 1, Skeletona: 3, Aunt: 2 },
      boss: { Sorceress: 1 }
    },
    firstKey: {
      N: 2,
      monster: { LittleSkelly: 1, Fox: 2, Skeletona: 1, Aunt: 1 },
      boss: { Wizard: 1 }
    },
    Red: {
      N: 2,
      monster: { LittleSkelly: 1, Skelegoat: 1, Fox: 1, Skeletona: 1, SmallEvilBat: 1, Aunt: 1 },
      boss: { Wizard: 1, Sorceress: 2 }
    },
    temple: {
      N: 1,
      monster: { SmallEvilBat: 1 }
    }
  },
  4: {
    start: {
      N: 1,
      monster: { SmallEvilBat: 1 },
      //monster: { Spider: 1 },
      //monster: { SkeletonMajor: 1 },
      //monster: { LittleOrc: 1 },
      //monster: { BlackGhost_BossL4: 1 },
      //monster: { RoomFairy: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        Wizard: 1,
        SmallEvilBat: 1,
        Aunt: 1,
        Spider: 1,
        SkeletonMajor: 1,
        LittleOrc: 0.2
      }
    },
    common: {
      N: 2,
      monster: {
        Wizard: 1,
        Aunt: 1,
        Spider: 1,
        SkeletonMajor: 1,
        LittleOrc: 0.5
      }
    },
    Gold: {
      N: 2,
      monster: { Sorceress: 1, Aunt: 1, Spider: 1, SkeletonMajor: 1, LittleOrc: 1, RoomFairy: 1 },
      boss: { BlackGhost_BossL4: 1 }
    },
    Silver: {
      N: 2,
      monster: { Aunt: 1, Spider: 1, SkeletonMajor: 1, LittleOrc: 1, RoomFairy: 1 },
      boss: { RoomFairy: 1 }
    },
    firstKey: {
      N: 2,
      monster: { Aunt: 1, Spider: 1, SkeletonMajor: 2, LittleOrc: 1 },
      boss: { Sorceress: 1 }
    },
    Red: {
      N: 2,
      monster: { Aunt: 2, Spider: 1, SkeletonMajor: 2, LittleOrc: 1 },
      boss: { Sorceress: 1, LittleOrc: 1 }
    },
    temple: {
      N: 1,
      monster: { SmallEvilBat: 1 }
    }
  },
  5: {
    start: {
      N: 1,
      monster: { RedBat: 1 },
      //monster: { SlowSkeletonTest: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        Spider: 1,
        SkeletonMajor: 1,
        LittleOrc: 1,
        RedBat: 1,
        Badger: 2,
        Sorceress: 1,
      }
    },
    common: {
      N: 2,
      monster: {
        Spider: 1,
        SkeletonMajor: 2,
        LittleOrc: 1,
        RedBat: 1.5,
        Badger: 2,
        Sorceress: 1,
        Scary: 0.5,
        ZombieGirl: 0.2,
        Fairy: 0.5
      }
    },
    Gold: {
      N: 2,
      monster: { LittleOrc: 1, RoomFairy: 1, RoomBlackGhost: 1, Scary: 2, ZombieGirl: 2 },
      boss: { Flamy_BossL5: 1 }
    },
    Silver: {
      N: 2,
      monster: { SkeletonMajor: 0.5, LittleOrc: 1, RoomFairy: 1, Badger: 0.5, Scary: 1, ZombieGirl: 1 },
      boss: { RoomBlackGhost: 1 }
    },
    firstKey: {
      N: 2,
      monster: { Spider: 1, SkeletonMajor: 2, LittleOrc: 3, Badger: 1, Scary: 0.5, ZombieGirl: 0.5, Fairy: 0.5 },
      boss: { Sorceress: 1, Scary: 2, Fairy: 1 }
    },
    Red: {
      N: 2,
      monster: { SkeletonMajor: 2, LittleOrc: 1, ZombieGirl: 1, Fairy: 1 },
      boss: { LittleOrc: 1, Scary: 2, Fairy: 1 }
    },
    temple: {
      N: 1,
      monster: { RedBat: 1 }
    }
  },
  6: {
    start: {
      N: 1,
      monster: { RedBat: 1, SkeletonMajor: 1 },
      //monster: { GreenSkelly: 1 },
      //monster: { SkeletonMajor: 1 },
      //monster: { LittleOrc: 1 },
      //monster: { BlackGhost_BossL4: 1 },
      //monster: { RoomFairy: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        Spider: 0.5,
        LittleOrc: 0.5,
        RedBat: 1,
        Badger: 1,
        Sorceress: 0.5,
        Scary: 0.7,
        ZombieGirl: 1,
        WhiteWolf: 1,
        Fairy: 1,
      }
    },
    common: {
      N: 2,
      monster: {
        Badger: 1,
        Sorceress: 0.5,
        Scary: 0.9,
        ZombieGirl: 1,
        WhiteWolf: 1,
        SkeletonGeneral: 0.4,
        Fairy: 1,
        BlackWolf: 1,
        GreenSkelly: 0.5
      }
    },
    Gold: {
      N: 2,
      monster: { RoomFairy: 1, RoomBlackGhost: 1, SkeletonGeneral: 1, GreenSkelly: 1 },
      boss: { ShabbySkeleton_BossL6: 1 }
    },
    Silver: {
      N: 2,
      monster: { RoomFairy: 1, Scary: 1, ZombieGirl: 1, SkeletonGeneral: 1, BlackWolf: 1, GreenSkelly: 1 },
      boss: { RoomBlackGhost: 1 }
    },
    Red: {
      N: 2,
      monster: { ZombieGirl: 1, Badger: 1, WhiteWolf: 1, SkeletonGeneral: 1, BlackWolf: 1, GreenSkelly: 1 },
      boss: { Scary: 1.1, SkeletonGeneral: 1, Fairy: 1, }
    },
    firstKey: {
      N: 2,
      monster: { Badger: 1, Scary: 1, ZombieGirl: 1, SkeletonMajor: 1, WhiteWolf: 1, Fairy: 1, BlackWolf: 1, GreenSkelly: 1 },
      boss: { Scary: 1, Fairy: 1.1, }
    },
    temple: {
      N: 1,
      monster: { SkeletonMajor: 1, Badger: 1 }
    }
  },
  7: {
    start: {
      N: 1,
      monster: { ZombieGirl: 1 },
      //monster: { Flamy: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        Scary: 1,
        ZombieGirl: 1,
        WhiteWolf: 1,
        BlackWolf: 1,
        Fairy: 1,
        SkeletonGeneral: 1,
        GreenSkelly: 1,
        Scorpion: 1,

      }
    },
    common: {
      N: 2,
      monster: {
        Scary: 0.8,
        SkeletonGeneral: 1,
        Fairy: 0.6,
        BlackWolf: 1,
        GreenSkelly: 1,
        Scorpion: 1,
        SmallDragon: 0.3,
        GreenZombie: 0.4,
        Croc: 0.3
      }
    },
    Gold: {
      N: 2,
      monster: { ShabbySkeleton: 1, BlackGhost: 1, GreenZombie: 1, Flamy: 1, SmallDragon: 1 },
      boss: { BlueDevil_BossL7: 1 }
    },
    Silver: {
      N: 2,
      monster: { SkeletonGeneral: 1, BlackGhost: 1, Scorpion: 1, GreenZombie: 1, Flamy: 1, SmallDragon: 1, ShabbySkeleton: 1, Croc: 1 },
      boss: { ShabbySkeleton: 1 }
    },
    Red: {
      N: 2,
      monster: { SkeletonGeneral: 1, BlackGhost: 1, Scorpion: 1, GreenZombie: 1, Flamy: 1, SmallDragon: 1, Croc: 1 },
      boss: { RoomFlamy: 1 }
    },
    firstKey: {
      N: 2,
      monster: { SkeletonGeneral: 1, Scorpion: 1, GreenZombie: 1, Croc: 1 },
      boss: { BlackGhost: 1 }
    },
    temple: {
      N: 1,
      monster: { SkeletonGeneral: 1 }
    }
  },
  8: {
    start: {
      N: 1,
      monster: { GreenSkelly: 1 },
      //monster: { RedDevil_BossL8: 1 },
      //monster: { Hudobec: 1 },
    },
    corridor: {
      N: 25,
      monster: {
        SkeletonGeneral: 0.5,
        GreenSkelly: 0.5,
        Scorpion: 1.1,
        Scary: 1,
        Fairy: 1,
        BlackGhost: 0.6,
        Flamy: 0.4,
        Croc: 1,
        SmallDragon: 1,
        Ninja: 0.5,
        ArmoredSkelly: 0.5,
        Hudobec: 0.2,

      }
    },
    common: {
      N: 2,
      monster: {
        Scorpion: 1.1,
        SmallDragon: 1,
        GreenZombie: 0.8,
        Croc: 1,
        BlackGhost: 1,
        Flamy: 1,
        ArmoredSkelly: 1,
        Hudobec: 0.8,
        Ninja: 0.7,
        ShabbySkeleton: 0.8
      }
    },
    Gold: {
      N: 2,
      monster: { ShabbySkeleton: 1, BlackGhost: 0.5, GreenZombie: 1, Flamy: 1, SmallDragon: 1.2, ArmoredSkelly: 1.3, Hudobec: 1.2, Ninja: 1.3 },
      boss: { RedDevil_BossL8: 1 }
    },
    Silver: {
      N: 2,
      monster: { BlackGhost: 1, Scorpion: 0.8, GreenZombie: 1, Flamy: 1, SmallDragon: 1.1, ShabbySkeleton: 1, Croc: 0.6, ArmoredSkelly: 1.1, Hudobec: 1, Ninja: 1 },
      boss: { RoomBlueDevil: 1 }
    },
    Red: {
      N: 2,
      monster: { SkeletonGeneral: 1, BlackGhost: 1, Scorpion: 1, GreenZombie: 1, Flamy: 1, SmallDragon: 1, Croc: 0.8, ShabbySkeleton: 1, ArmoredSkelly: 1, Hudobec: 0.8, Ninja: 0.9 },
      boss: { ShabbySkeleton: 1 }
    },
    firstKey: {
      N: 2,
      monster: { Scorpion: 1, GreenZombie: 1, Croc: 1, BlackGhost: 1, ShabbySkeleton: 1, ArmoredSkelly: 1, Hudobec: 0.7, Ninja: 0.8 },
      boss: { SmallDragon: 1 }
    },
    temple: {
      N: 1,
      monster: { SkeletonGeneral: 1 }
    }
  },
  9: {
    start: {
      N: 1,
      monster: { Hudobec: 1, ArmoredSkelly: 1 },
      //monster: {SmallSkelly: 1}
    },
    corridor: {
      N: 25,
      monster: {
        Flamy: 1,
        SmallDragon: 1,
        Ninja: 1,
        GreenPuffer: 0.5,
        ArmoredSkelly: 1,
        Knight: 0.1,
        SmallSkelly: 0.8
      }
    },
    common: {
      N: 2,
      monster: {
        SmallDragon: 1,
        Flamy: 1,
        Ninja: 1,
        BlueDevil: 1,
        GreenPuffer: 1,
        ArmoredSkelly: 0.5,
        Knight: 0.5,
        SmallSkelly: 1
      }
    },
    Gold: {
      N: 2,
      monster: { SmallDragon: 1.2, Ninja: 1.3, BlueDevil: 1, RedDevil: 1, GreenPuffer: 1, Knight: 1.2, SmallSkelly: 1.3 },
      boss: { RedBull_BossL9: 1 }
    },
    Silver: {
      N: 2,
      monster: { Flamy: 1, SmallDragon: 1.1, Ninja: 1, BlueDevil: 1, RedDevil: 1, GreenPuffer: 1, Knight: 1.1, SmallSkelly: 1.2 },
      boss: { Knight: 1 }
    },
    Red: {
      N: 2,
      monster: { Flamy: 1, SmallDragon: 1, Ninja: 0.9, BlueDevil: 1, GreenPuffer: 1, Knight: 1, SmallSkelly: 1 },
      boss: { SmallSkelly: 1 }
    },
    firstKey: {
      N: 2,
      monster: { Ninja: 0.8, GreenPuffer: 1, Knight: 0.4, SmallSkelly: 0.8 },
      boss: { RoomBlueDevil: 1 }
    },
    temple: {
      N: 1,
      monster: { Hudobec: 1, ArmoredSkelly: 1, }
    }
  },
  10: {
    corridor: {
      N: 18,
      monster: {
        RedBull: 1,
        Knight: 1,
        Death1: 1,
        Death2: 1,
        Cutie: 1,
        Walker: 1,
      }
    },
    boss: {
      Dragon: 1,
    }
  },
};
var SPAWN = {
  INI: {
    health_potions_per_level: 6,
    mana_potions_per_level: 7,
    scrolls_per_level: 6,
    monster_on_corridors: 25,
    gold_per_level: 6
  },
  init() {
    for (const item in COMMON_ITEM_TYPE) {
      let sprite = COMMON_ITEM_TYPE[item].class;
      ASSET[sprite] = new LiveSPRITE("1D", [SPRITE[sprite]]);
    }
  },
  stairs(map, level, upperLimit) {
    map.entranceVector = map.deadEndDirection(map.entrance);
    let upGrid = map.entrance.add(map.entranceVector.mirror());
    let stairsUp;
    if (level > upperLimit) {
      stairsUp = new Staircase(upGrid, map.entranceVector, STAIRCASE_TYPE.UP);
      map.GA.addStair(upGrid);
    } else {
      stairsUp = new Staircase(upGrid, map.entranceVector, STAIRCASE_TYPE.GATE);
    }
    map.GA.reserve(upGrid); //new, check
    DECAL.add(stairsUp);

    map.exitVector = map.deadEndDirection(map.exit);
    let downGrid = map.exit.add(map.exitVector.mirror());
    let stairsDown = new Staircase(
      downGrid,
      map.exitVector,
      STAIRCASE_TYPE.DOWN
    );
    map.GA.addStair(downGrid);
    map.GA.reserve(downGrid); //new, check
    DECAL.add(stairsDown);
  },
  shrines(map) {
    const SHRINES = [
      SHRINE_TYPE.AttackShrine,
      SHRINE_TYPE.DefenseShrine,
      SHRINE_TYPE.MagicShrine
    ];
    for (const [index, shrine] of map.shrines.entries()) {
      let DE_Dir = map.deadEndDirection(shrine);
      let wallGrid = shrine.add(DE_Dir.mirror());
      map.GA.reserve(wallGrid);
      let shr = new Shrine(wallGrid, DE_Dir, SHRINES[index]);
      DECAL.add(shr);
    }
  },
  mapPointers(map) {
    map.map_pointers = [
      map.shrines.chooseRandom(),
      map.keys.Red,
      map.keys.Silver,
      map.keys.Gold
    ];
  },
  dungeonObjects(map, level, upperLimit) {
    this.stairs(map, level, upperLimit);

    //keys and gates
    let gateCounter = 0;
    for (let key in map.keys) {
      let grid = map.keys[key];
      let item = new CommonItem(grid, COMMON_ITEM_TYPE[key + "Key"]);
      FLOOR_OBJECT.add(item);
    }
    for (let gate in map.lockedRooms) {
      gateCounter++;
      let gateName = `${gate}Gate`;
      let door = map.lockedRooms[gate].door[0];
      for (const dir of ENGINE.directions) {
        let grid = door.add(dir);
        if (map.GA.isEmpty(grid)) {
          let gateInstance = new Gate(door, dir, GATE_TYPE[gateName]);
          gateInstance.masterId = gateCounter;
          DECAL.add(gateInstance);
        }
      }
    }

    //close all doors of common rooms
    const ignore = ["Silver", "Gold", "Red"];
    for (let R of map.rooms) {
      if (ignore.includes(R.type)) continue;
      for (let D of R.door) {
        map.GA.closeDoor(D);
        gateCounter++;
        for (const dir of ENGINE.directions) {
          let grid = D.add(dir);
          if (map.GA.isEmpty(grid)) {
            let gateInstance = new Gate(D, dir, GATE_TYPE.WoodenGate);
            gateInstance.masterId = gateCounter;
            DECAL.add(gateInstance);
          }
        }
      }
    }

    this.shrines(map);
    this.mapPointers(map);
  },
  arena(map, level, upperLimit) {
    let t0 = performance.now();
    //dungeon objects
    this.stairs(map, level, upperLimit);

    //lock golden gate
    let gateCounter = 0;
    for (let gate in map.lockedRooms) {
      gateCounter++;
      let gateName = `${gate}Gate`;
      let door = map.lockedRooms[gate].door[0];
      for (const dir of ENGINE.directions) {
        let grid = door.add(dir);
        if (map.GA.isEmpty(grid)) {
          let gateInstance = new Gate(door, dir, GATE_TYPE[gateName]);
          gateInstance.masterId = gateCounter;
          DECAL.add(gateInstance);
        }
      }
    }

    //shrines
    this.shrines(map);

    //decals
    let N = (map.width * map.height * (1 - parseFloat(map.density)) * 0.75) | 0;
    let corrDecalGrids = map.poolOfCorridorDecalGrids(N);
    let type = { Painting: 20, Crest: 1.5 };
    for (let grid of corrDecalGrids) {
      DECAL.add(new Decal(grid.grid, grid.dir, DECAL_TYPE[weightedRnd(type)]));
    }
    this.arenaItems(map);
    this.arena_monsters(map, level);
    map.map_pointers = [...map.shrines];
    console.log(
      `%cLevel ${GAME.level} spawned in ${performance.now() - t0} ms`,
      "color: orange"
    );
  },
  spawn(map, level, upperLimit) {
    console.log("spawning level...", level);
    let t0 = performance.now();
    this.dungeonObjects(map, level, upperLimit);
    this.monsters(map, level);
    this.decals(map);
    this.containers(map);
    this.items(map);
    console.log(
      `%cLevel ${GAME.level} spawned in ${performance.now() - t0} ms`,
      "color: orange"
    );
  },
  arena_monsters(map, level) {
    let corrGrids = map.poolOfCorridorGrids(MOSTER_LAYOUT[level].corridor.N);
    for (let grid of corrGrids) {
      let type = weightedRnd(MOSTER_LAYOUT[level].corridor.monster);
      let enemy = new Monster(
        grid,
        map.GA.getDirectionsIfNot(grid, MAPDICT.WALL).chooseRandom(),
        MONSTER[type]
      );
      ENEMY.add(enemy);
    }
    //boss
    let boss = MOSTER_LAYOUT[level].boss;
    let N = Object.keys(boss).length;
    corrGrids = map.poolOfCorridorGrids(N);
    for (let [index, monster] of Object.keys(boss).entries()) {
      let grid = corrGrids[index];
      let enemy = new Monster(
        grid,
        map.GA.getDirectionsIfNot(grid, MAPDICT.WALL).chooseRandom(),
        MONSTER[monster]
      );
      ENEMY.add(enemy);
    }

    //analysis
    if (DEBUG.VERBOSE) ENEMY.analyze();
  },
  monsters(map, level) {
    let corrGrids = map.poolOfCorridorGrids(MOSTER_LAYOUT[level].corridor.N);
    for (let grid of corrGrids) {
      let type = weightedRnd(MOSTER_LAYOUT[level].corridor.monster);
      let enemy = new Monster(
        grid,
        map.GA.getDirectionsIfNot(grid, MAPDICT.WALL).chooseRandom(),
        MONSTER[type]
      );
      ENEMY.add(enemy);
    }
    for (let R of map.rooms) {
      let N = MOSTER_LAYOUT[level][R.type].N;
      for (let i = 0; i < N; i++) {
        let space = map.findSpace(R.area);
        let type = weightedRnd(MOSTER_LAYOUT[level][R.type].monster);
        let enemy = new Monster(
          space,
          map.GA.getDirectionsIfNot(space, MAPDICT.WALL).chooseRandom(),
          MONSTER[type]
        );
        let guardPosition = map.findMiddleSpaceUnreserved(R.area);
        enemy.guardPosition = guardPosition;
        ENEMY.add(enemy);
      }
      //boss
      let boss = MOSTER_LAYOUT[level][R.type].boss;
      if (boss) {
        let space = map.findSpace(R.area);
        let type = weightedRnd(MOSTER_LAYOUT[level][R.type].boss);
        let enemy = new Monster(
          space,
          map.GA.getDirectionsIfNot(space, MAPDICT.WALL).chooseRandom(),
          MONSTER[type]
        );
        let guardPosition = map.findMiddleSpaceUnreserved(R.area);
        enemy.guardPosition = guardPosition;
        ENEMY.add(enemy);
      }
    }

    //analysis
    if (DEBUG.VERBOSE) ENEMY.analyze();
  },
  decals(map) {
    for (const room of map.rooms) {
      const t = 0.25 * room.squareSize + 0.4;
      let N = RND(
        Math.max((t >>> 0) - 1, 1, (room.squareSize / 8) >>> 0),
        Math.round(t + 0.75)
      );
      let wallGrids = map.roomWallGrids(room);
      while (N > 0 && wallGrids.length > 0) {
        let grid = wallGrids.removeRandom();
        map.GA.reserve(grid); //room wall grid reservation
        let type = { Painting: 20, Crest: 1 };
        DECAL.add(
          new Decal(grid.grid, grid.dir, DECAL_TYPE[weightedRnd(type)])
        );
        N--;
      }
    }
    let N = (map.width * map.height * parseFloat(map.density) * 0.13) | 0;
    let corrDecalGrids = map.poolOfCorridorDecalGrids(N);
    for (let grid of corrDecalGrids) {
      DECAL.add(new Decal(grid.grid, grid.dir, DECAL_TYPE.Crest));
    }
  },
  containers(map) {
    for (const room of map.rooms) {
      let corner = map.roomCornerGrids(room);
      let position = Grid.toCenter(corner.grid).translate(
        Vector.sumVectors(corner.dir.clone()),
        0.25
      );
      let faceDir = Vector.sumVectors(corner.dir)
        .ortoSplit()
        .filter((el) => !el.isNull())
        .chooseRandom()
        .mirror();
      let container = new FloorContainer(
        position,
        faceDir,
        FLOOR_CONTAINER_TYPE.Chest
      );
      FLOOR_OBJECT.add(container);
    }
  },
  arenaItems(map) {
    //mana potions
    let corridorPool = map.poolOfCorridorGrids(SPAWN.INI.mana_potions_per_level);
    for (const grid of corridorPool) {
      let BluePotion = new CommonItem(grid, COMMON_ITEM_TYPE.BluePotion);
      FLOOR_OBJECT.add(BluePotion);
    }
    //health potions
    corridorPool = map.poolOfCorridorGrids(SPAWN.INI.health_potions_per_level);
    for (const grid of corridorPool) {
      let RedPotion = new CommonItem(grid, COMMON_ITEM_TYPE.RedPotion);
      FLOOR_OBJECT.add(RedPotion);
    }
    //scrolls
    corridorPool = map.poolOfCorridorGrids(SPAWN.INI.scrolls_per_level);
    for (const grid of corridorPool) {
      let Scroll = new CommonItem(grid, COMMON_ITEM_TYPE.Scroll);
      FLOOR_OBJECT.add(Scroll);
    }
    //gold, COMMON_ITEM_TYPE.Gold
    corridorPool = map.poolOfCorridorGrids(SPAWN.INI.gold_per_level);
    for (const grid of corridorPool) {
      let Gold = new CommonItem(grid, COMMON_ITEM_TYPE.GoldBar, RND(75, 125));
      FLOOR_OBJECT.add(Gold);
    }
    //skills and h/m
    const total = 5;
    let skillsAndStats = [
      COMMON_ITEM_TYPE.HealthStatus,
      COMMON_ITEM_TYPE.ManaStatus,
      COMMON_ITEM_TYPE.MagicSkill,
      COMMON_ITEM_TYPE.ShieldSkill,
      COMMON_ITEM_TYPE.SwordSkill
    ];
    corridorPool = map.poolOfCorridorGrids(total);
    for (let i = 0; i < total; i++) {
      let item = new CommonItem(corridorPool[i], skillsAndStats[i], 0);
      FLOOR_OBJECT.add(item);
    }

  },
  items(map) {

    //health potions
    let roomPool = map.poolOfRoomGrids(SPAWN.INI.health_potions_per_level);
    for (const grid of roomPool) {
      let RedPotion = new CommonItem(grid, COMMON_ITEM_TYPE.RedPotion);
      FLOOR_OBJECT.add(RedPotion);
    }
    //mana potions
    let corridorPool = map.poolOfCorridorGrids(
      SPAWN.INI.mana_potions_per_level
    );
    for (const grid of corridorPool) {
      let BluePotion = new CommonItem(grid, COMMON_ITEM_TYPE.BluePotion);
      FLOOR_OBJECT.add(BluePotion);
    }
    //scrolls
    let anyPool = map.poolOfGrids(SPAWN.INI.scrolls_per_level);
    for (const grid of anyPool) {
      let Scroll = new CommonItem(grid, COMMON_ITEM_TYPE.Scroll);
      FLOOR_OBJECT.add(Scroll);
    }
    //gold, COMMON_ITEM_TYPE.Gold
    anyPool = map.poolOfGrids(SPAWN.INI.gold_per_level);
    for (const grid of anyPool) {
      let Gold = new CommonItem(grid, COMMON_ITEM_TYPE.GoldCoin, RND(10, 50));
      FLOOR_OBJECT.add(Gold);
    }

    anyPool = map.poolOfGrids(SPAWN.INI.gold_per_level);
    for (const grid of anyPool) {
      let Gold = new CommonItem(grid, COMMON_ITEM_TYPE.GoldBar, RND(50, 100));
      FLOOR_OBJECT.add(Gold);
    }

    //skills and h/m
    const total = 5;
    let skillsAndStats = [
      COMMON_ITEM_TYPE.HealthStatus,
      COMMON_ITEM_TYPE.ManaStatus,
      COMMON_ITEM_TYPE.MagicSkill,
      COMMON_ITEM_TYPE.ShieldSkill,
      COMMON_ITEM_TYPE.SwordSkill
    ];
    let DE = map.freeDeadEnds(total);
    let remain = total - DE.length;
    if (remain > 0) {
      let addFromRoom = map.poolOfRoomGrids(remain);
      DE = DE.concat(addFromRoom);
    }
    for (let [index, grid] of DE.entries()) {
      let item = new CommonItem(grid, skillsAndStats[index], 0);
      FLOOR_OBJECT.add(item);
    }
  }
};
console.log("%cMAP for CrawlMaster loaded.", "color: #888");